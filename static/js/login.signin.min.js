"use strict";

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

var LoginSignin =
/*#__PURE__*/
function () {
  function LoginSignin() {
    _classCallCheck(this, LoginSignin);

    this.ajax = new AjaxPlugin();
    this.form = new FormPlugin();
    this.alert = new AlertPlugin();
    this.$formSignup = $("#form-signup");
    this.config = $.extend(true, {}, APP);
    this.url = {
      list: "".concat(this.config.url.controllerFullUrl, "/list"),
      update: "".concat(this.config.url.controllerFullUrl, "/update"),
      create: "".concat(this.config.url.controllerFullUrl, "/create"),
      "delete": "".concat(this.config.url.controllerFullUrl, "/delete")
    };
  }

  _createClass(LoginSignin, [{
    key: "initValidation",
    value: function initValidation() {
      var _this = this;

      this.$formSignup.validate({
        submitHandler: function submitHandler(form) {
          _this.alert.confirm({
            text: 'Â¿Los datos son los correctos?',
            type: 'warning',
            title: 'Advertencia!'
          }, function () {
            form.submit();
          });
        },
        rules: {
          "Persona[correo]": {
            required: true,
            remote: {
              url: "".concat(this.url.searchEmail),
              type: "get",
              data: {
                email: function email() {
                  return _this.$formSignup.find("input#Persona_correo").val();
                }
              }
            }
          }
        },
        messages: {
          "Persona[correo]": {
            required: 'Por favor complete este campo',
            remote: 'Ya existe este correo'
          }
        }
      });
    }
  }, {
    key: "init",
    value: function init() {
      this.initValidation();
    }
  }]);

  return LoginSignin;
}();

$(function () {
  new LoginSignin().init();
});